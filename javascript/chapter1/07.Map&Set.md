---
title: "Map & Set ç±»å‹"
date: "2019-08-20"
---

# JavaScript | Map ä¸ Set ç±»å‹ <!-- omit in toc -->

ä»‹ç» Map ç±»å‹ä¸ Set ç±»å‹çš„ç‰¹æ€§ä¸æ–¹æ³•ã€‚

## ç›®å½• <!-- omit in toc -->

- [Map](#map)
  - [ä¸»è¦æ–¹æ³•](#ä¸»è¦æ–¹æ³•)
  - [åˆ›å»ºMap](#åˆ›å»ºmap)
- [Set](#set)
  - [ä¸»è¦æ–¹æ³•](#ä¸»è¦æ–¹æ³•-1)
- [WeakMap å’Œ WeakSet](#weakmap-å’Œ-weakset)

<br>

---

<br>

## Map

`Map` æ˜¯ä¸€ä¸ªé”®å€¼å¯¹çš„é›†åˆï¼Œä¸ `Object` çš„ä¸»è¦çš„åŒºåˆ«æ˜¯ï¼š`Map` å…è®¸æ‰€æœ‰æ•°æ®ç±»å‹ä½œä¸ºé”®ï¼ŒåŒ…æ‹¬å¯¹è±¡ã€‚

### ä¸»è¦æ–¹æ³•

| æ–¹æ³•                | æè¿°                                       |
| ------------------- | ------------------------------------------ |
| new Map()           | åˆ›å»º map                                   |
| map.set(key, value) | æ ¹æ®é”®ï¼ˆkeyï¼‰å­˜å‚¨å€¼ï¼ˆvalueï¼‰ã€‚æ”¯æŒé“¾å¼è°ƒç”¨ |
| map.get(key)        | æ ¹æ®é”®è¿”å›å€¼ã€‚è‹¥è¯¥é”®ä¸å­˜åœ¨ï¼Œè¿”å› undefined |
| map.has(key)        | è‹¥é”®å­˜åœ¨ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false        |
| map.delete(key)     | ç§»é™¤è¯¥é”®çš„å€¼                               |
| map.clear()         | æ¸…ç©º map                                   |
| map.size            | è¿”å›å½“å‰å…ƒç´ ä¸ªæ•°                           |

### åˆ›å»ºMap

```js
// [key, value] é”®å€¼å¯¹æ•°ç»„
let map = new Map([
  ['1',  'str1'],
  [1,    'num1'],
  [true, 'bool1']
]);
```

`Object.entries(obj)`å¯ä»¥è¿”å›å¯¹è±¡çš„é”®å€¼å¯¹æ•°ç»„ï¼Œåˆ©ç”¨å®ƒå¯ä»¥å®ç°Objectåˆ°Mapçš„è½¬æ¢ã€‚

```js
let object = {
  name: "Haze",
  age: 18
}
let map = new Map( Object.entries(object) );
```

<br>

## Set

Set æ˜¯ä¸€ä¸ªå€¼çš„é›†åˆï¼Œè¿™ä¸ªé›†åˆä¸­æ‰€æœ‰çš„å€¼ä»…å‡ºç°ä¸€æ¬¡ã€‚

### ä¸»è¦æ–¹æ³•

| æ–¹æ³•              | æè¿°                                                |
| ----------------- | --------------------------------------------------- |
| new Set(iterable) | åˆ›å»º setï¼Œå¯ä»¥åˆ©ç”¨å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚æ•°ç»„ï¼‰æ¥åˆ›å»º        |
| set.add(value)    | æ·»åŠ å€¼ï¼Œè¿”å› set è‡ªèº«                               |
| set.delete(value) | åˆ é™¤å€¼ï¼Œè‹¥è¯¥ value å­˜åœ¨åˆ™è¿”å› true ï¼Œå¦åˆ™è¿”å› false |
| set.has(value)    | å¦‚æœ set ä¸­å­˜åœ¨è¯¥å€¼åˆ™è¿”å› true ï¼Œå¦åˆ™è¿”å› false     |
| set.clear()       | æ¸…ç©º set                                            |
| set.size          | è¿”å›å½“å‰å…ƒç´ ä¸ªæ•°                                    |

<br>

## WeakMap å’Œ WeakSet

WeakMap å’Œ WeakSet æ˜¯ Map ä¸ Set çš„å˜ä½“ã€‚

- WeakMap ä»…å…è®¸å¯¹è±¡ä½œä¸ºé”®ï¼Œå¹¶ä¸”å½“å¯¹è±¡ç”±äºå…¶ä»–åŸå› ä¸å¯å¼•ç”¨çš„æ—¶å€™å°†å…¶åˆ é™¤ã€‚
- WeakMap æ²¡æœ‰ size å±æ€§ï¼Œæ²¡æœ‰ clear() æ–¹æ³•ï¼Œæ²¡æœ‰è¿­ä»£å™¨ï¼Œæ— æ³•ä½¿ç”¨keys()ã€values()ç­‰æ–¹æ³•ã€‚

- WeakSet ä»…å­˜å‚¨å¯¹è±¡ï¼Œå¹¶ä¸”å½“å¯¹è±¡ç”±äºå…¶ä»–åŸå› ä¸å¯å¼•ç”¨çš„æ—¶å€™å°†å…¶åˆ é™¤ã€‚
- åŒæ ·ä¸æ”¯æŒ size/clear() å’Œè¿­ä»£å™¨ï¼Œæ— æ³•ä½¿ç”¨keys()ã€‚

WeakMap å’Œ WeakSet è¢«ç”¨ä½œä¸»è¦å¯¹è±¡å­˜å‚¨çš„æ¬¡è¦æ•°æ®ç»“æ„è¡¥å……ã€‚ä¸€æ—¦å¯¹è±¡ä»å­˜å‚¨ç§»é™¤ï¼Œé‚£ä¹ˆå­˜åœ¨äº WeakMap/WeakSet çš„æ•°æ®å°†ä¼šè¢«è‡ªåŠ¨æ¸…é™¤ã€‚

æˆ‘ä»¬å¯ä»¥ç”¨åœ¨å½“æˆ‘ä»¬é‡Šæ”¾å¯¹è±¡çš„æ—¶å€™ï¼ŒåŒæ—¶å°±èƒ½æŠŠå¯¹åº”å­˜å‚¨åœ¨Set/Mapé‡Œçš„å†…å­˜ä¸€å¹¶é‡Šæ”¾ï¼Œè€Œæ— éœ€æ‰‹åŠ¨åˆ é™¤ã€‚

<br>

---

<br>

## æ›´å¤šå†…å®¹ <!-- omit in toc -->

è¿”å›[ä¸ªäººç¬”è®°å¯¼èˆªğŸ˜Š](../README.md)
