# JavaScript | æµè§ˆå™¨è°ƒè¯•ä¸ä»£ç æµ‹è¯• <!-- omit in toc -->

ä»‹ç»å¦‚ä½•ä½¿ç”¨ç°ä»£æµè§ˆå™¨è¿›è¡Œç®€å•çš„ä»£ç è°ƒè¯•ä¸ç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚

## ç›®å½• <!-- omit in toc -->

- [æµè§ˆå™¨æ§åˆ¶å°](#%e6%b5%8f%e8%a7%88%e5%99%a8%e6%8e%a7%e5%88%b6%e5%8f%b0)
- [Chrome è°ƒè¯•å¿«æ·é”®](#chrome-%e8%b0%83%e8%af%95%e5%bf%ab%e6%8d%b7%e9%94%ae)
- [debugger å‘½ä»¤](#debugger-%e5%91%bd%e4%bb%a4)
- [æ—¥å¿—è®°å½•](#%e6%97%a5%e5%bf%97%e8%ae%b0%e5%bd%95)
- [ä»£ç ç¼–å†™è§„èŒƒ](#%e4%bb%a3%e7%a0%81%e7%bc%96%e5%86%99%e8%a7%84%e8%8c%83)
- [è‡ªåŠ¨åŒ–æµ‹è¯•](#%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95)
  - [å¸¸ç”¨åº“](#%e5%b8%b8%e7%94%a8%e5%ba%93)
  - [æ ·ä¾‹](#%e6%a0%b7%e4%be%8b)
  - [å…¶ä»–å‡½æ•°](#%e5%85%b6%e4%bb%96%e5%87%bd%e6%95%b0)
  - [å…¶ä»–æ–­è¨€](#%e5%85%b6%e4%bb%96%e6%96%ad%e8%a8%80)

<br>

---

<br>


## æµè§ˆå™¨æ§åˆ¶å°

åœ¨æµè§ˆå™¨ï¼ˆå¦‚ Firefox ä¸ Chromeï¼‰ä¸­çš„æ§åˆ¶å°æµ‹è¯•åŠŸèƒ½æ—¶ï¼Œæ¢è¡Œéœ€è¦ä½¿ç”¨ <kbd>Shift</kbd>+<kbd>Enter</kbd> é”®ï¼Œå•ç‹¬çš„ <kbd>Enter</kbd> é”®ä¼šç›´æ¥è¿è¡Œä»£ç ã€‚

æˆ–è€…å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š

```js
(function() {
    "use strict";

    // è„šæœ¬ä»£ç ...

})
```

<br>

## Chrome è°ƒè¯•å¿«æ·é”®

| å¿«æ·é”®                          | åŠŸèƒ½               |
| ------------------------------- | ------------------ |
| <kbd>F8</kbd>                   | ç»§ç»­æ‰§è¡Œ           |
| <kbd>F10</kbd>                  | ä¸‹ä¸€æ­¥ï¼ˆè·³è¿‡å‡½æ•°ï¼‰ |
| <kbd>F11</kbd>                  | ä¸‹ä¸€æ­¥ï¼ˆè¿›å…¥å‡½æ•°ï¼‰ |
| <kbd>Shift</kbd>+<kbd>F11</kbd> | æ‰§è¡Œåˆ°å‡½æ•°æœ«å°¾     |

æ­¤å¤–ï¼Œåœ¨ä»£ç çš„æŸä¸€è¡Œå³é”®èœå•ä¸­æœ‰ä¸€ä¸ªâ€œContinue to hereâ€çš„é€‰é¡¹è¿è¡Œä»£ç åˆ°æŒ‡å®šä½ç½®ï¼Œååˆ†æ–¹ä¾¿ã€‚

<br>

## debugger å‘½ä»¤

```js
function hello(name) {
  let phrase = `Hello, ${name}!`;
  debugger;  // <-- è°ƒè¯•å™¨ä¼šåœ¨è¿™åœæ­¢
  say(phrase);
}
```

<br>

## æ—¥å¿—è®°å½•

```js
console.log(msg);
```
æ¶ˆæ¯ä¼šå‘é€åˆ°æ§åˆ¶å°ä¸­ã€‚

<br>

## ä»£ç ç¼–å†™è§„èŒƒ

 [javascript.info](https://zh.javascript.info) ä¸Šæœ‰ä¸€ç¯‡åè®½ç³Ÿç³•çš„ç¼–å†™ä¹ æƒ¯çš„æ–‡ç« å€¼å¾—ä¸€é˜…ï¼š[ninja code](https://zh.javascript.info/ninja-code)

<br>

## è‡ªåŠ¨åŒ–æµ‹è¯•

### å¸¸ç”¨åº“

åœ¨åŸæ•™ç¨‹ä¸­ä½¿ç”¨äº†ä¸€ä¸‹ JavaScript åº“è¿›è¡Œæµ‹è¯•ï¼š

- Mocha â€”â€” æ ¸å¿ƒæ¡†æ¶ï¼šæä¾›äº†åŒ…æ‹¬ `describe` å’Œ `it` çš„é€šç”¨å‹æµ‹è¯•å‡½æ•°å’Œè¿è¡Œæµ‹è¯•çš„ä¸»å‡½æ•°ã€‚
- Chai â€”â€” æä¾›å¾ˆå¤šæ–­è¨€æ”¯æŒçš„åº“ã€‚å®ƒå¯ä»¥ç”¨å¾ˆå¤šä¸åŒçš„æ–­è¨€ã€‚ç°åœ¨æˆ‘ä»¬åªéœ€è¦ç”¨ `assert.equal`ã€‚
- Sinon â€”â€” ç”¨äºç›‘è§†å‡½æ•°ã€æ¨¡æ‹Ÿå†…ç½®å‡½æ•°å’Œå…¶ä»–å‡½æ•°çš„åº“ã€‚

### æ ·ä¾‹

```js
function pow() {
  return 8; // :) æˆ‘ä»¬ä½œå¼Šå•¦ï¼
}

describe("pow", function() {

  it("2 raised to power 3 is 8", function() {
    assert.equal(pow(2, 3), 8);
  });

  it("3 raised to power 3 is 27", function() {
    assert.equal(pow(3, 3), 27);
  });

});
```

`describe("title", function() { ... })`

è¡¨ç¤ºæˆ‘ä»¬æ­£åœ¨æè¿°çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆã€‚ç”¨äºç»„ç»‡ `it` ä»£ç å—ã€‚

`it("title", function() { ... })`

it é‡Œé¢çš„ â€œtitleâ€ ä¸­æˆ‘ä»¬ä»¥äººç±»å¯è¯»çš„æ–¹å¼æè¿°ç‰¹å®šçš„ç”¨ä¾‹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæµ‹è¯•å®ƒçš„å‡½æ•°ã€‚

æœ€å¥½ä¸€ä¸ªitå‡½æ•°ä½“å†…å†™ä¸€ä¸ªæµ‹è¯•ï¼Œå¦åˆ™å‰é¢çš„æµ‹è¯•æŠ¥é”™ä¼šåœæ­¢åé¢çš„æµ‹è¯•ã€‚

`assert.equal(value1, value2)`

it å—ä¸­çš„ä»£ç ã€‚

å°†æ”¹ä»£ç åŒ…å«è¿›HTMLé¡µé¢ä¸­ï¼š

```HTML
<!DOCTYPE html>
<html>
<head>
  <!-- add mocha css, to show results -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/3.2.0/mocha.css">
  <!-- add mocha framework code -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/3.2.0/mocha.js"></script>
  <script>
    mocha.setup("bdd"); // minimal setup
  </script>
  <!-- add chai -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chai/3.5.0/chai.js"></script>
  <script>
    // chai has a lot of stuff, let's make assert global
    let assert = chai.assert;
  </script>
</head>

<body>

  <script>
    function pow() {
      return 8; // :) æˆ‘ä»¬ä½œå¼Šå•¦ï¼
    }
  </script>

  <!-- the script with tests (describe, it...) -->
  <script src="test.js"></script>

  <!-- the element with id="mocha" will contain test results -->
  <div id="mocha"></div>

  <!-- run tests! -->
  <script>
    mocha.run();
  </script>
</body>

</html>
```

è¯¥é¡µé¢å†…å®¹å¯åˆ†ä¸ºå››éƒ¨åˆ†ï¼š

1. `<head/>` ä¸ºæµ‹è¯•æ·»åŠ ç¬¬ä¸‰æ–¹åº“å’Œæ ·å¼æ–‡ä»¶ã€‚
2. `<script/>` åŒ…å«æµ‹è¯•å‡½æ•°ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ --å’Œ pow ç›¸å…³çš„ä»£ç ã€‚
3. `test.js` æµ‹è¯•ä»£ç  â€“ åŒ…å«ä¸Šé¢ `describe("pow", ...)`ã€‚
4. HTML å…ƒç´  `<div id="mocha"/>` å°†ä¼šè¢« Mocha ç”¨æ¥è¾“å‡ºç»“æœã€‚

æµ‹è¯•å°†ä»¥ mocha.run() å‘½ä»¤å¼€å§‹ã€‚

æ•ˆæœï¼š

![pow-test](pics/pow-test.jpg)

å¦ï¼šæµ‹è¯•å‡½æ•°æ”¯æŒåµŒå¥—ã€‚

### å…¶ä»–å‡½æ•°

åŒ…å«äº`Mocha`åº“ä¸­è¿˜æœ‰ä¸€äº›å‡½æ•°ã€‚

ä¾‹å¦‚ `before/after å’Œ beforeEach/afterEach`

ä¾‹å­ï¼š

```js
describe("test", function() {

  before(() => alert("Testing started â€“ before all tests"));
  after(() => alert("Testing finished â€“ after all tests"));

  beforeEach(() => alert("Before a test â€“ enter a test"));
  afterEach(() => alert("After a test â€“ exit a test"));

  it("test 1", () => alert(1));
  it("test 2", () => alert(2));

});
```

### å…¶ä»–æ–­è¨€

`Chai`åº“ä¸­çš„å¸¸ç”¨æ–­è¨€ä¾‹å¦‚ï¼š

| æ–­è¨€å‡½æ•°                               | ä½œç”¨                           |
| -------------------------------------- | ------------------------------ |
| assert.equal(value1, value2)           | æ£€æµ‹ç›¸ç­‰ value1 == value2      |
| assert.strictEqual(value1, value2)     | æ£€æµ‹ä¸¥æ ¼ç›¸ç­‰ value1 === value2 |
| assert.notEqual, assert.notStrictEqual | åˆšå¥½å’Œä¸Šé¢åšç›¸åçš„æ£€æŸ¥         |
| assert.isTrue(value)                   | æ£€æŸ¥ value === true            |
| assert.isFalse(value)                  | æ£€æŸ¥ value === false           |
| assert.isNaN(value)                    | æ£€æŸ¥ value === NaN             |

æ›´å¤šè¯·æŸ¥çœ‹[docs](https://www.chaijs.com/api/assert/)

<br>

---

<br>

## æ›´å¤šå†…å®¹ <!-- omit in toc -->

è¿”å›[ä¸ªäººç¬”è®°å¯¼èˆªğŸ˜Š](../README.md)
